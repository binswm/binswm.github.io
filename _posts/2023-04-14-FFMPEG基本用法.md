---
layout:     post
title:      FFMPEG基本用法
subtitle:   FFMPEG基本用法
date:       2023-04-14
author:     bin
header-img: img/color_black.png
catalog: true
tags:
    - ffmpeg
    
---

## 常用命令



`-i`简单理解就是input，输入给ffmpeg的文件  
`-c`为音频和视频所有的编码，气候温和加“copy”则为直接复制音视频全部编码  
`-vcodec`为指定编码，后若为“copy”为不重新编码  
`-acodec`为指定音频编码，后若为“copy”为不重新编码  
`-f`为指定格式  
`-vn`为取消视频输出，只输出音频  
`-an`为取消音频输出  
`-sn`为取消字幕输出  
`-ss`为开始时间（从第几秒开始计算），后为秒数  
`%%~na`为输出文件名与输入相同  






### WIN

/
- mkv转MP4

```
ffmpeg -i D:\01.mkv D:\01.mp4
```

/

- 视频生成8帧（视频持续100秒，每12.5秒截一帧），并输出后缀带有数字排序的jpg文件

```
ffmpeg -i D:\01.mp4 -t 100 -r 0.08 -f image2 -y D:\01_img_%03d.jpg
```
```
其中：
D:\01.mp4 为输入文件，D:\01  为输出文件路径
-t为持续时间
-r为截图频率，后为1即为每一秒钟截图一帧。后为0.5则为每两秒钟截图一帧，以此类推
“-ss”为开始时间（从第几秒开始计算），后为秒数
“-t”为持续时间
“-r”为截图频率，后为1即为每一秒钟截图一帧。后为0.5则为每两秒钟截图一帧，以此类推
** [
“-t 100 -r 0.05”为生成5帧（视频持续100秒，每20秒截一帧）
"-t 100 -r 0.08"为生成8帧（视频持续100秒，每12.5秒截一帧）
“-t 100 -r 0.1”为生成10帧（视频持续100秒，每10秒截一帧）
“-t 200 -r 0.04”为生成8帧（视频持续200秒，每25秒截一帧）
“-t 400 -r 0.02”为生成8帧（视频持续400秒，每50秒截一帧）
] **
%%~na_img_%03d为输出文件名，意为：【输入文件名_img_三位数字从1开始排序】，其中“%03d”为三位数字以0补齐(备注：单独命令用%03d，批量命令用%%03d)

```

/

- 在元数据中添加命令使播放器旋转90度

```
ffmpeg -i D:\01.mkv -c copy -metadata:s:v:0 rotate=-90 D:\01.mp4
```

/

- 去掉视频保留音频，并输出名为<源文件名.m4a>

```
ffmpeg -i D:\01.mp4 -vn -acodec copy D:\01.m4a
```

/